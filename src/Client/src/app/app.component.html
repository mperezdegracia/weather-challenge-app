<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold">Weather App</h1>

  <form [formGroup]="formGroup" class="flex items-center space-x-4">
    <p-dropdown class="mr-3" [options]="cities" formControlName="selectedCity" optionLabel="name"
      placeholder="Select a City"></p-dropdown>
      <p-checkbox class="ml-4" formControlName="showHistory" binary="showHistory" label="Show History"></p-checkbox>
    <p-button class="ml-4" label="Search" icon="pi pi-check" [loading]="loading" (onClick)="load()"></p-button>
  </form>
  <div class="results p-4">
    <div *ngIf="weather" class="mt-4">
      <h2>Weather for {{ weather.city }}, {{weather.country}}</h2>
      <p>Temperature: {{ weather.temperature }}°C</p>
      <p>Conditions: {{ weather.feelsLike }}</p>
    </div>

    <div *ngIf="history.length > 0" class="mt-4">
      <h2>History</h2>
      <p-table [value]="history">
        <ng-template pTemplate="header">
          <tr>
            <th>Country</th>
            <th>City</th>
            <th>Temperature</th>
            <th>Feels like</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-h>
          <tr>
            <td>{{ h.country }}</td>
            <td>{{ h.city }}</td>
            <td>{{ h.temperature }}°C</td>
            <td>{{ h.feelsLike }}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>